{"sections":{"main":{"type":"main-page","disabled":true,"settings":{"heading_size":"title-xl","heading_alignment":"text-left","heading_tag":"h1","text_size":"text-lg md:text-2xl","padding_top":72,"padding_bottom":120,"divider":false,"narrow":false,"rounded":false}},"custom_liquid_cbyGWk":{"type":"custom-liquid","name":"t:sections.custom-liquid.presets.name","settings":{"liquid":"<style>\n#chatbot-container {\n    position: fixed;\n    bottom: 24px;\n    right: 24px;\n    z-index: 10000;\n    font-family: Jost, sans-serif;\n}\n\n#chat-overlay {\n    display: none;\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100vw;\n    height: 100vh;\n    background: rgba(0, 0, 0, 0.8);\n    backdrop-filter: blur(5px); \n    -webkit-backdrop-filter: blur(5px);\n    z-index: 9999;\n    transition: opacity 0.3s ease;\n    opacity: 0;\n}\n\n#chat-overlay.active {\n    display: block;\n    opacity: 1;\n}\n\n@media (max-width: 480px) {\n    #chat-overlay.active {\n        display: block;\n    }\n}\n@media (max-width: 480px) {\n  #chat-toggle {\n      margin-bottom: unset;\n   }\n}\n\n#chat-toggle {\n    width: 64px;\n    height: 64px;\n    border-radius: 50%;\n    background: linear-gradient(45deg, #00b862 0%, #00b862 70%, #00b862 100%);\n    border: none;\n    cursor: pointer;\n    box-shadow: 0 4px 15px rgba(251, 146, 60, 0.2);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    color: white;\n    font-size: 28px;\n    backdrop-filter: blur(10px);\n    position: relative;\n    overflow: hidden;\n}\n\n#chat-toggle::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.15) 0%, transparent 60%);\n    border-radius: 50%;\n    opacity: 0;\n    transition: opacity 0.3s ease;\n}\n\n#chat-toggle:hover {\n    transform: scale(1.05) translateY(-2px);\n    box-shadow: 0 6px 20px rgba(251, 146, 60, 0.3);\n}\n\n#chat-toggle:hover::before {\n    opacity: 1;\n}\n\n#chat-toggle:active {\n    transform: scale(0.98);\n}\n\n@media (max-width: 480px) {\n    #chatbot-container.chat-active #chat-toggle {\n        display: none;\n    }\n    #chatbot-container:not(.chat-active) #chat-toggle {\n        display: flex;\n    }\n}\n\n#chat-toggle.new-session::after {\n    content: '';\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    width: 12px;\n    height: 12px;\n    background: #10b981;\n    border-radius: 50%;\n    border: 2px solid white;\n    animation: pulse 2s infinite;\n}\n\n@keyframes pulse {\n    0% {\n        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);\n    }\n    70% {\n        box-shadow: 0 0 0 10px rgba(16, 185, 129, 0);\n    }\n    100% {\n        box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);\n    }\n}\n\n#chat-window {\n    position: absolute;\n    bottom: 84px;\n    right: 0;\n    width: 380px;\n    height: 640px;\n    background: rgba(255, 255, 255, 1);\n    backdrop-filter: blur(15px);\n    border-radius: 20px;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);\n    display: none;\n    flex-direction: column;\n    overflow: hidden;\n    border: 1px solid rgba(238, 219, 188, 0.6);\n    animation: slideUp 1s cubic-bezier(0.4, 0, 0.2, 1);\n}\n\n@keyframes slideUp {\n    from {\n        opacity: 0;\n        transform: translateY(20px) scale(0.95);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0) scale(1);\n    }\n}\n\n#chat-header {\n    background: #fff;\n    color: white;\n    padding: 32px 20px 24px 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    position: relative;\n    overflow: hidden;\n    cursor: context-menu;\n    border-block-end-color: rgba(238, 219, 188, 0.6);\n    border-block-end-style: solid;\n    border-block-end-width: 1px;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n.header-text {\n  display: flex;\n  flex-direction: column;\n}\n.status {\n  font-size: 12px;\n  color: #00b862;\n  font-weight: 300;\n  line-height: 1.2;\n  margin-top: 2px;\n}\n.header-right {\n  display: flex;\n  gap: 8px;\n  align-items: center;\n}\n\n.profile-pic {\n    width: 60px;\n    height: 60px;\n    border-radius: 50%;\n    object-fit: cover;\n    border: 2px solid rgba(239, 219, 188, 0.6);\n}\n@media (max-width: 480px) {\n    .profile-pic {\n        width: 42px;\n        height: 42px;\n    }\n    #chat-header {\n        padding: 16px 20px;\n    }\n}\n\n#chat-header::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, transparent 50%);\n}\n\n#chat-header h3 {\n    margin: 0;\n    font-size: 24px;\n    font-weight: 400;\n    letter-spacing: -0.6px;\n    position: relative;\n    z-index: 1;\n    line-height: 24px;\n}\n\n#chat-clear,\n#chat-close {\n    background: rgba(235, 215, 182, 0);\n    border: none;\n    color: #efdbbc;\n    cursor: pointer;\n    font-size: 30px;\n    padding: 8px;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 8px;\n    transition: all 0.2s ease;\n    position: relative;\n    z-index: 1;\n}\n\n#chat-clear {\n    display: none;\n}\n\n#chat-clear:hover,\n#chat-close:hover {\n    background: rgba(239, 219, 188, 1);\n    color: #462f2f;\n    font-size: 22px;\n    border-radius: 50%;\n    padding: 8px;\n    width: 32px;\n    height: 32px;\n    transform: scale(1.00);\n}\n\n#chat-messages {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n    scroll-behavior: smooth;\n    overscroll-behavior: contain;\n    touch-action: pan-y;\n}\n\n#chat-messages::-webkit-scrollbar {\n    width: 4px;\n}\n\n#chat-messages::-webkit-scrollbar-track {\n    background: transparent;\n}\n\n#chat-messages::-webkit-scrollbar-thumb {\n    background: rgba(148, 163, 184, 0.3);\n    border-radius: 2px;\n}\n\n#chat-messages::-webkit-scrollbar-thumb:hover {\n    background: rgba(148, 163, 184, 0.5);\n}\n\n.message {\n    max-width: 85%;\n    padding: 14px 18px;\n    border-radius: 20px;\n    font-size: 14px;\n    line-height: 1.5;\n    word-wrap: break-word;\n    animation: messageSlide 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    position: relative;\n    margin-bottom: 10px;\n}\n\n@keyframes messageSlide {\n    from {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.message.user {\n    background: linear-gradient(135deg, #eddfbc90 0%, #eddfbc90 100%);\n    color: #462f2f;\n    margin-left: auto;\n    border-bottom-right-radius: 6px;\n    border: 1px solid rgba(148, 163, 184, 0.1);\n}\n\n.message.bot {\n    background: linear-gradient(135deg, #f4f5f7 0%, #f4f5f7 100%);\n    color: #462f2f;\n    margin-right: auto;\n    border-bottom-left-radius: 6px;\n    box-shadow: 0 2px 8px rgba(251, 146, 60, 0.05);\n}\n\n.message.bot a {\n    color: #462f2f;\n    text-decoration: underline;\n    font-weight: 600;\n    transition: all 0.2s ease;\n}\n\n.message.bot a:hover {\n    color: #462f2f90;\n    text-decoration: none;\n    text-shadow: 0 0 8px rgba(251, 191, 36, 0.4);\n}\n\n.message.bot a:visited {\n    color: #462f2f;\n}\n\n.message.typing {\n    background: linear-gradient(135deg, #f4f5f7 0%, #f4f5f7 100%);\n    color: #462f2f;\n    margin-right: auto;\n    border-bottom-left-radius: 6px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    border: 1px solid rgba(148, 163, 184, 0.1);\n    min-height: 40px;\n    padding: 10px 18px;\n}\n\n.typing-dots {\n    display: flex;\n    gap: 4px;\n}\n\n.typing-dot {\n    width: 10px;\n    height: 10px;\n    border-radius: 50%;\n    background: #462f2f;\n    animation: typing 1.4s infinite ease-in-out;\n}\n\n.typing-dot:nth-child(1) {\n    animation-delay: -0.32s;\n}\n\n.typing-dot:nth-child(2) {\n    animation-delay: -0.16s;\n}\n\n@keyframes typing {\n    0%, 80%, 100% {\n        opacity: 0.3;\n        transform: scale(0.8);\n    }\n    40% {\n        opacity: 1;\n        transform: scale(1);\n    }\n}\n\n#chat-input-container {\n    padding: 20px;\n    border-top: 1px solid rgba(239, 219, 188, 0);\n    display: flex;\n    gap: 12px;\n    align-items: flex-end;\n    background: rgba(255, 255, 255, 1);\n    backdrop-filter: blur(10px);\n    -webkit-text-size-adjust: 100%;\n    touch-action: manipulation;\n}\n\n#chat-input {\n    flex: 1;\n    border: 1px solid #efdbbc;\n    border-radius: 24px;\n    padding: 12px 16px;\n    font-size: 16px;\n    outline: none;\n    resize: none;\n    min-height: 45px;\n    max-height: 80px;\n    font-family: Jost, sans-serif;\n    line-height: 1.5;\n    transition: all 0.2s ease;\n    background: white;\n    color: #462f2f;\n    overflow-y: hidden;\n    box-sizing: border-box;\n    -webkit-text-size-adjust: 100%;\n    -webkit-tap-highlight-color: transparent;\n    touch-action: manipulation;\n}\n\n#chat-input:focus {\n    border-color: #efdbbc;\n    box-shadow: 0 0 0 3px rgba(251, 146, 60, 0.1);\n    transform: translateY(-1px);\n}\n\n#chat-input::placeholder {\n    color: #94a3b8;\n}\n\n#chat-send {\n    background: linear-gradient(135deg, #efdbbc 0%, #efdbbc 100%);\n    border: none;\n    border-radius: 24px;\n    width: 48px;\n    height: 48px;\n    color: #462f2f;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n    font-size: 20px;\n    box-shadow: 0 4px 12px rgba(251, 146, 60, 0.2);\n}\n\n#chat-send:hover {\n    transform: scale(1.05) translateY(-1px);\n    box-shadow: 0 6px 20px rgba(251, 146, 60, 0.3);\n}\n\n#chat-send:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n    transform: none;\n    box-shadow: none;\n}\n\n#chat-send:active {\n    transform: scale(0.98);\n}\n\n.welcome-message {\n    background: linear-gradient(135deg, #f8fcfa 0%, #f8fcfa 100%);\n    border: 1px solid #00b86250;\n    border-radius: 12px;\n    padding: 12px;\n    text-align: center;\n    font-size: 14px;\n    color: #00b862;\n    margin-bottom: 8px;\n    line-height: 1.5;\n}\n\n.session-info {\n    opacity: 0.7;\n    font-size: 10px;\n    margin-top: 6px;\n    display: none;\n}\n\n.session-restored {\n    background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%);\n    border: 1px solid #bbf7d0;\n    color: #166534;\n}\n\n.session-new {\n    background: linear-gradient(135deg, #fff5f5 0%, #fef2f2 100%);\n    border: 1px solid #fecaca;\n    color: #991b1b;\n}\n\ninput,\ntextarea {\n    font-size: 16px !important;\n}\n\n@media (max-width: 480px) {\n    #chatbot-container {\n        bottom: 16px;\n        right: 16px;\n    }\n    #chat-window {\n        width: calc(100vw - 32px);\n        height: calc(100vh - 120px);\n        right: 0px;\n        bottom: 20px;\n        border-radius: 16px!important;\n        padding-bottom: 10px;\n    }\n    #chat-toggle {\n        width: 56px;\n        height: 56px;\n        font-size: 22px;\n    }\n    .message {\n        max-width: 90%;\n        font-size: 14px;\n    }\n    #chat-input-container {\n        padding: 16px;\n    }\n    #chat-header {\n        padding: 16px 20px;\n    }\n    #chat-messages {\n        padding: 16px;\n    }\n}\n\n@media (max-width: 360px) {\n    #chat-window {\n        width: calc(100vw - 2px);\n        height: calc(100vh - 120px);\n        right: 2px;\n    }\n    #chatbot-container {\n        right: 2px;\n    }\n}\n\nbody #chatbot-container #chat-messages .message.user,\nbody #chatbot-container #chat-messages .message.bot {\n    visibility: visible !important;\n    opacity: 1 !important;\n    display: block !important;\n}\n\nbody #chatbot-container #chat-messages .message.typing,\nbody #chatbot-container #chat-messages .typing-dots,\nbody #chatbot-container #chat-messages .typing-dot {\n    visibility: visible !important;\n    opacity: 1 !important;\n}\n\n<\/style>\n\n<!-- Chatbot HTML layout -->\n<div id=\"chatbot-container\">\n  <button id=\"chat-toggle\">\n    <svg xmlns=\"http:\/\/www.w3.org\/2000\/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-chat\" viewBox=\"0 0 16 16\">\n      <path d=\"M2.678 11.894a1 1 0 0 1 .287.801 11 11 0 0 1-.398 2c1.395-.323 2.247-.697 2.634-.893a1 1 0 0 1 .71-.074A8 8 0 0 0 8 14c3.996 0 7-2.807 7-6s-3.004-6-7-6-7 2.808-7 6c0 1.468.617 2.83 1.678 3.894m-.493 3.905a22 22 0 0 1-.713.129c-.2.032-.352-.176-.273-.362a10 10 0 0 0 .244-.637l.003-.01c.248-.72.45-1.548.524-2.319C.743 11.37 0 9.76 0 8c0-3.866 3.582-7 8-7s8 3.134 8 7-3.582 7-8 7a9 9 0 0 1-2.347-.306c-.52.263-1.639.742-3.468 1.105\"\/>\n    <\/svg>\n  <\/button>\n  <div id=\"chat-window\">\n    <div id=\"chat-header\">\n  <div class=\"header-left\">\n    <img src=\"https:\/\/cdn.shopify.com\/s\/files\/1\/0913\/5079\/4627\/files\/Julie.jpg?v=1752083772\" alt=\"Julie Profile Picture\" class=\"profile-pic\">\n    <div class=\"header-text\">\n      <h3>Julie<\/h3>\n      <span class=\"status\">Currently online<\/span>\n    <\/div>\n  <\/div>\n  <div class=\"header-right\">\n    <button id=\"chat-clear\" title=\"Clear conversation history\">⟳<\/button>\n    <button id=\"chat-close\">×<\/button>\n  <\/div>\n<\/div>\n    <div id=\"chat-messages\">\n      <div class=\"welcome-message\">\n        Hey there – Julie from GotchaMart here!\n        Let me know what you’re looking for, I’ll take care of the rest 😊\n        <div class=\"session-info\" style=\"margin-top: 8px; font-size: 11px; opacity: 0.7;\">\n          Right-click header to clear history\n        <\/div>\n      <\/div>\n    <\/div>\n    <div id=\"chat-input-container\">\n      <textarea id=\"chat-input\" placeholder=\"Type your message...\" rows=\"1\"><\/textarea>\n      <button id=\"chat-send\">➤<\/button>\n    <\/div>\n  <\/div>\n<\/div>\n\n<!-- Chatbot logic -->\n<script>\nclass ShopifyChatbot {\n    constructor(config) {\n        this.webhookUrl = config.webhookUrl;\n        this.metadata = config.metadata || {};\n        this.sessionExpiryHours = 24;\n        this.isOpen = false;\n\n        this.initializeSession();\n        this.initializeElements();\n        this.attachEventListeners();\n        this.autoResize();\n        this.restorePreviousConversation();\n    }\n\n    initializeSession() {\n        const existingSession = this.getStoredSession();\n        \n        if (existingSession && !this.isSessionExpired(existingSession.timestamp)) {\n            this.sessionId = existingSession.sessionId;\n            console.log('Restored existing session:', this.sessionId);\n        } else {\n            this.sessionId = this.generateSessionId();\n            this.saveSessionToStorage();\n            console.log('Created new session:', this.sessionId);\n        }\n    }\n\n    generateSessionId() {\n        return 'session_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();\n    }\n\n    getStoredSession() {\n        try {\n            const stored = localStorage.getItem('shopify_chatbot_session');\n            return stored ? JSON.parse(stored) : null;\n        } catch (error) {\n            console.error('Error reading session from localStorage:', error);\n            return null;\n        }\n    }\n\n    saveSessionToStorage() {\n        try {\n            const sessionData = {\n                sessionId: this.sessionId,\n                timestamp: Date.now(),\n                messages: []\n            };\n            localStorage.setItem('shopify_chatbot_session', JSON.stringify(sessionData));\n        } catch (error) {\n            console.error('Error saving session to localStorage:', error);\n        }\n    }\n\n    isSessionExpired(timestamp) {\n        const now = Date.now();\n        const expiryTime = this.sessionExpiryHours * 60 * 60 * 1000;\n        return (now - timestamp) > expiryTime;\n    }\n\n    saveMessageToStorage(message, sender) {\n        try {\n            const stored = this.getStoredSession();\n            if (stored) {\n                stored.messages.push({\n                    text: message,\n                    sender: sender,\n                    timestamp: Date.now()\n                });\n                if (stored.messages.length > 50) {\n                    stored.messages = stored.messages.slice(-50);\n                }\n                localStorage.setItem('shopify_chatbot_session', JSON.stringify(stored));\n            }\n        } catch (error) {\n            console.error('Error saving message to localStorage:', error);\n        }\n    }\n\n    restorePreviousConversation() {\n        const stored = this.getStoredSession();\n        if (stored && stored.messages && stored.messages.length > 0) {\n            this.messagesContainer.innerHTML = '';\n            const welcomeDiv = document.createElement('div');\n            welcomeDiv.className = 'welcome-message';\n            welcomeDiv.textContent = \"Hey there – Julie from GotchaMart here! I can help you find products, answer questions, and assist with your shopping experience!😊\";\n            this.messagesContainer.appendChild(welcomeDiv);\n            stored.messages.forEach(msg => {\n                this.addMessageToDOM(msg.text, msg.sender, false);\n            });\n            console.log(`Restored ${stored.messages.length} previous messages`);\n        }\n    }\n\n    clearSession() {\n        try {\n            localStorage.removeItem('shopify_chatbot_session');\n            this.sessionId = this.generateSessionId();\n            this.saveSessionToStorage();\n            this.messagesContainer.innerHTML = '';\n            const welcomeDiv = document.createElement('div');\n            welcomeDiv.className = 'welcome-message';\n            welcomeDiv.textContent = \"Hi! I'm your AI shopping assistant. I can help you find products, answer questions, and assist with your shopping experience!\";\n            this.messagesContainer.appendChild(welcomeDiv);\n            console.log('Session cleared, new session created:', this.sessionId);\n        } catch (error) {\n            console.error('Error clearing session:', error);\n        }\n    }\n\n    initializeElements() {\n        this.container = document.getElementById('chatbot-container');\n        this.toggleBtn = document.getElementById('chat-toggle');\n        this.chatWindow = document.getElementById('chat-window');\n        this.closeBtn = document.getElementById('chat-close');\n        this.messagesContainer = document.getElementById('chat-messages');\n        this.inputField = document.getElementById('chat-input');\n        this.sendBtn = document.getElementById('chat-send');\n        this.overlay = document.getElementById('chat-overlay');\n    }\n\n    attachEventListeners() {\n        this.toggleBtn.addEventListener('click', () => this.toggleChat());\n        this.closeBtn.addEventListener('click', () => this.closeChat());\n        this.sendBtn.addEventListener('click', () => this.sendMessage());\n        this.inputField.addEventListener('keypress', (e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n                e.preventDefault();\n                this.sendMessage();\n            }\n        });\n        this.inputField.addEventListener('input', () => this.autoResize());\n        this.chatWindow.querySelector('#chat-header').addEventListener('contextmenu', (e) => {\n            e.preventDefault();\n            if (confirm('Clear conversation history? This will start a new session.')) {\n                this.clearSession();\n            }\n        });\n    }\n\n    autoResize() {\n        this.inputField.style.height = 'auto';\n        this.inputField.style.height = Math.min(this.inputField.scrollHeight, 100) + 'px';\n    }\n\n    toggleChat() {\n        if (this.isOpen) {\n            this.closeChat();\n        } else {\n            this.openChat();\n        }\n    }\n\n    openChat() {\n        this.chatWindow.style.display = 'flex';\n        this.toggleBtn.innerHTML = '×';\n        this.isOpen = true;\n        if (window.innerWidth <= 480 && this.overlay) {            this.overlay.classList.add('active');\n        }\nthis.container.classList.add('chat-active');\n    }\n\n    closeChat() {\n        this.chatWindow.style.display = 'none';\n        this.toggleBtn.innerHTML = '💬';\n        this.isOpen = false;\nif (this.overlay) {        this.overlay.classList.remove('active');\n        }\nthis.container.classList.remove('chat-active');\n    }\n\n    convertMarkdownToHtml(text) {\n        const escapeHtml = (unsafe) => {\n            return unsafe\n                .replace(\/&\/g, \"&amp;\")\n                .replace(\/<\/g, \"&lt;\")\n                .replace(\/>\/g, \"&gt;\")\n                .replace(\/\"\/g, \"&quot;\")\n                .replace(\/'\/g, \"&#039;\");\n        };\n        let safeText = escapeHtml(text);\n        safeText = safeText.replace(\n            \/\\[([^\\]]+)\\]\\((https?:\\\/\\\/[^\\s\\)]+)\\)\/g,\n            '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1<\/a>'\n        );\n        safeText = safeText.replace(\/\\n\/g, '<br>');\n        safeText = safeText.replace(\/\\*\\*([^*]+)\\*\\*\/g, '<strong>$1<\/strong>');\n        safeText = safeText.replace(\/\\*([^*]+)\\*\/g, '<em>$1<\/em>');\n        return safeText;\n    }\n\n    addMessage(text, sender, saveToStorage = true) {\n        this.addMessageToDOM(text, sender, saveToStorage);\n    }\n\n    addMessageToDOM(text, sender, saveToStorage = true) {\n        const messageDiv = document.createElement('div');\n        messageDiv.className = `message ${sender}`;\n        if (sender === 'bot') {\n            messageDiv.innerHTML = this.convertMarkdownToHtml(text);\n        } else {\n            messageDiv.textContent = text;\n        }\n        this.messagesContainer.appendChild(messageDiv);\n        this.scrollToBottom();\n        if (saveToStorage) {\n            this.saveMessageToStorage(text, sender);\n        }\n    }\n\n    async sendMessage() {\n        const message = this.inputField.value.trim();\n        if (!message) return;\n\n        const stored = this.getStoredSession();\n        if (!stored || this.isSessionExpired(stored.timestamp)) {\n            console.log('Session expired, creating new session');\n            this.clearSession();\n        }\n\n        this.setInputState(false);\n        this.addMessage(message, 'user');\n        this.inputField.value = '';\n        this.autoResize();\n\n        const typingId = this.showTyping();\n\n        try {\n            const minTypingDuration = new Promise(resolve => setTimeout(resolve, 500));\n            const response = await fetch(this.webhookUrl, {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application\/json',\n                },\n                body: JSON.stringify({\n                    chatInput: message,\n                    sessionId: this.sessionId,\n                    metadata: {\n                        ...this.metadata,\n                        timestamp: new Date().toISOString(),\n                        user_agent: navigator.userAgent,\n                        current_page: window.location.href\n                    }\n                })\n            });\n\n            await minTypingDuration;\n\n            if (!response.ok) {\n                throw new Error(`HTTP error! status: ${response.status}`);\n            }\n\n            const data = await response.json();\n            this.removeTyping(typingId);\n            this.addMessage(data.output || 'Sorry, I encountered an error. Please try again.', 'bot');\n        } catch (error) {\n            console.error('Chat error:', error);\n            await minTypingDuration;\n            this.removeTyping(typingId);\n            this.addMessage('Sorry, I\\'m having trouble connecting. Please try again later.', 'bot');\n        } finally {\n            this.setInputState(true);\n        }\n    }\n\n    showTyping() {\n        console.log('Showing typing indicator');\n        const typingId = 'typing_' + Date.now();\n        const typingDiv = document.createElement('div');\n        typingDiv.className = 'message typing';\n        typingDiv.id = typingId;\n        typingDiv.innerHTML = `\n            <span>Typing<\/span>\n            <div class=\"typing-dots\">\n                <div class=\"typing-dot\">&nbsp<\/div>\n                <div class=\"typing-dot\">&nbsp<\/div>\n                <div class=\"typing-dot\">&nbsp<\/div>\n            <\/div>\n        `;\n        this.messagesContainer.appendChild(typingDiv);\n        this.scrollToBottom();\n        return typingId;\n    }\n\n    removeTyping(typingId) {\n        console.log('Removing typing indicator:', typingId);\n        const typingElement = document.getElementById(typingId);\n        if (typingElement) {\n            typingElement.remove();\n        } else {\n            console.log('Typing element not found:', typingId);\n        }\n    }\n\n    setInputState(enabled) {\n        this.inputField.disabled = !enabled;\n        this.sendBtn.disabled = !enabled;\n    }\n\n    scrollToBottom() {\n        this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;\n    }\n\n    getSessionInfo() {\n        const stored = this.getStoredSession();\n        return {\n            currentSessionId: this.sessionId,\n            storedSession: stored,\n            isExpired: stored ? this.isSessionExpired(stored.timestamp) : null,\n            messageCount: stored ? stored.messages.length : 0\n        };\n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    const chatbotConfig = {\n        webhookUrl: 'https:\/\/n8n.srv919157.hstgr.cloud\/webhook\/9983efb3-0df7-4ca3-811f-b56d03258233\/chat',\n        metadata: {\n            website_name: 'Debutify',\n            website_url: window.location.origin,\n            current_page: window.location.href,\n            page_title: document.title,\n            user_agent: navigator.userAgent,\n            customer_email: typeof customer !== 'undefined' ? customer.email : 'guest',\n            customer_id: typeof customer !== 'undefined' ? customer.id : null\n        }\n    };\n\n    window.shopifyChatbot = new ShopifyChatbot(chatbotConfig);\n    \n    window.chatbotDebug = {\n        getSessionInfo: () => window.shopifyChatbot.getSessionInfo(),\n        clearSession: () => window.shopifyChatbot.clearSession(),\n        checkExpiry: () => {\n            const stored = window.shopifyChatbot.getStoredSession();\n            if (stored) {\n                const hoursAgo = (Date.now() - stored.timestamp) \/ (1000 * 60 * 60);\n                console.log(`Session created ${hoursAgo.toFixed(2)} hours ago`);\n                console.log('Expired:', window.shopifyChatbot.isSessionExpired(stored.timestamp));\n            }\n        }\n    };\n});\n<\/script>","color_text":"","color_background":"","gradient_background":"","color_button_text":"","color_button_background":"","color_button_gradient":"","padding_top":0,"padding_bottom":0,"divider":false,"narrow":false,"rounded":false}},"highlight_text_iE4iN9":{"type":"highlight-text","blocks":{"heading_dppDRH":{"type":"heading","settings":{"heading":"Contact our team","heading_size":"title-lg tracking-heading","heading_tag":"h2","highlighted_text":"none","highlighted_scribble":"circle"}},"image_A4Fw4Q":{"type":"image","settings":{"image":"shopify:\/\/shop_images\/contact-customer-service.jpg","image_width":150,"image_height":90,"link":"","description":"","image_width_mobile":90,"image_height_mobile":50}},"heading_reqyFh":{"type":"heading","settings":{"heading":"at <em>+1 (806) 278-2126<\/em>","heading_size":"title-lg tracking-heading","heading_tag":"h2","highlighted_text":"scribble","highlighted_scribble":"circle"}}},"block_order":["heading_dppDRH","image_A4Fw4Q","heading_reqyFh"],"name":"t:sections.highlight-text.presets.name","settings":{"text_alignment":"center","text_alignment_mobile":"center","heading":"","heading_size":"title-md","heading_alignment":"text-left md:items-end md:flex-row","heading_tag":"h2","subheading":"","description":"","button_label":"","button_link":"","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle","color_text":"","color_background":"","gradient_background":"","color_highlight":"","gradient_highlight":"","color_button_text":"","color_button_background":"","color_button_gradient":"","padding_top":12,"padding_bottom":12,"divider":false,"narrow":true,"rounded":false}},"multicolumn_RzMRUY":{"type":"multicolumn","blocks":{"column_6cY477":{"type":"column","settings":{"show_border":false,"text_alignment":"left","text_alignment_mobile":"left","image_ratio":"adapt","heading":"➡️ Manage my subscription","heading_size":"text-lg-2xl","text":"<p>Stay as long as you love it. Cancel your PrimePapas subscription anytime — it’s simple, stress-free, and on your terms.<\/p>","button_label":"My subscription","button_link":"https:\/\/secure.primepapas.com\/portal\/","button_style":"secondary","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle"}},"column_Mr7bN9":{"type":"column","settings":{"show_border":false,"text_alignment":"left","text_alignment_mobile":"left","image_ratio":"adapt","heading":"⚡️ My Primepapas Club","heading_size":"text-lg-2xl","text":"<p>Enjoy exclusive member perks: early access to new drops, VIP-only discounts, and surprise rewards tailored just for you.<\/p>","button_label":"My club","button_link":"https:\/\/secure.primepapas.com\/club\/","button_style":"secondary","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle"}},"column_Aqphpr":{"type":"column","settings":{"show_border":false,"text_alignment":"left","text_alignment_mobile":"left","image_ratio":"adapt","heading":"🚚 Track my package","heading_size":"text-lg-2xl","text":"<p>Track your order in real time. Get updates on shipping status, delivery estimates, and carrier details — all in one place.<\/p>","button_label":"Track my order","button_link":"shopify:\/\/pages\/contact","button_style":"secondary","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle"}}},"block_order":["column_6cY477","column_Mr7bN9","column_Aqphpr"],"name":"t:sections.multicolumn.presets.name","settings":{"gap":"large","columns":3,"columns_mobile":"1","swipe_on_mobile":true,"heading":"","heading_size":"title-md","heading_alignment":"text-center md:items-center","heading_tag":"h2","subheading":"","description":"","button_label":"","button_link":"","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle","color_text":"","color_background":"","gradient_background":"","color_highlight":"","gradient_highlight":"","color_button_text":"","color_button_background":"","color_button_gradient":"","padding_top":36,"padding_bottom":36,"divider":false,"full_width":false,"rounded":false}},"highlight_text_4HMV3x":{"type":"highlight-text","blocks":{"heading_jaH4Dk":{"type":"heading","settings":{"heading":"⬇️ Contact our team","heading_size":"title-sm","heading_tag":"h2","highlighted_text":"none","highlighted_scribble":"circle"}}},"block_order":["heading_jaH4Dk"],"name":"t:sections.highlight-text.presets.name","settings":{"text_alignment":"center","text_alignment_mobile":"center","heading":"","heading_size":"title-md","heading_alignment":"text-left md:items-end md:flex-row","heading_tag":"h2","subheading":"","description":"","button_label":"","button_link":"","button_external":false,"button_icon":false,"highlighted_text":"none","highlighted_scribble":"circle","color_text":"","color_background":"","gradient_background":"","color_highlight":"","gradient_highlight":"","color_button_text":"","color_button_background":"","color_button_gradient":"","padding_top":40,"padding_bottom":16,"divider":false,"narrow":true,"rounded":false}},"contact_form_4mVLtM":{"type":"contact-form","blocks":{"contact_Ga6cKM":{"type":"contact","settings":{"heading":"Email","text":"<p><strong>support@primepapas.com<\/strong><\/p>"}},"contact_Fa4YTr":{"type":"contact","settings":{"heading":"Phone","text":"<p><strong>+1 (806) 278-2126<\/strong><a href=\"#\" title=\"tel:+33 (0) 31-305-210\"><strong><br\/><\/strong><\/a>mo – fri: 09:00 – 17:00<\/p>"}},"custom_field_6k3D9h":{"type":"custom_field","settings":{"type":"select","title":"Subject","required":false,"full_width":false,"checked_value":"Yes","unchecked_value":"No","radio_options":"","select_options":"My order, Track my package, Manage my subscription, Informations"}}},"block_order":["contact_Ga6cKM","contact_Fa4YTr","custom_field_6k3D9h"],"settings":{"heading":"","heading_size":"title-md","heading_alignment":"text-left md:items-end md:flex-row","heading_tag":"h2","subheading":"","description":"","button_label":"","button_link":"","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle","color_text":"","color_background":"","gradient_background":"","color_highlight":"","gradient_highlight":"","color_button_text":"","color_button_background":"","color_button_gradient":"","padding_top":0,"padding_bottom":12,"divider":false,"narrow":false,"rounded":false}},"faq_UgJHnx":{"type":"faq","blocks":{"question_FrCq3V":{"type":"question","settings":{"title":"How can I track my order?","text":"<p>Once your order is shipped, you’ll receive an email with your <strong>tracking number<\/strong>. You can track your package anytime here 👉 <a href=\"https:\/\/primepapas.com\/pages\/track-your-order?utm_source=chatgpt.com\">Track My Order<\/a>.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}},"question_GgH7U8":{"type":"question","settings":{"title":"I didn’t receive my order confirmation, what should I do?","text":"<p>Sometimes the confirmation email ends up in the <strong>spam\/junk folder<\/strong>. Please check there first.<br\/><br\/>If you still don’t see it, contact us at <a><strong>support@primepapas.com<\/strong><\/a> or call us at <strong>+1 (806) 278-2126<\/strong>, and we’ll resend it to you.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}},"question_T9GAiC":{"type":"question","settings":{"title":"Can I modify or cancel my order?","text":"<p>Yes — you can <strong>cancel or change your order as long as it hasn’t been processed<\/strong> by our warehouse team.<br\/><br\/>⚠️ Once your order has been shipped, it can no longer be modified or canceled.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}},"question_DUBY73":{"type":"question","settings":{"title":"What is your return and refund policy?","text":"<p>We offer a <strong>30-day satisfaction guarantee<\/strong>. If the product doesn’t work for you, simply contact our support team and we’ll guide you through the return and refund process.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}},"question_dz66B9":{"type":"question","settings":{"title":"How does the PrimePapas Club Membership work?","text":"<p>At checkout, you can select the <strong>First Time Offer option<\/strong>. You’ll enjoy a <strong>7-day free trial <\/strong>and enjoy discount on your first order, then the subscription continues at <strong>$37.99\/month<\/strong>.<br\/><br\/>VIP members get access to <strong>exclusive deals<\/strong> and our private member zone 👉 <a href=\"https:\/\/secure.primepapas.com\/club?utm_source=chatgpt.com\">secure.primepapas.com\/club<\/a>.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}},"question_QKiVHj":{"type":"question","settings":{"title":"How can I manage or cancel my subscription?","text":"<p>You can update your subscription, change payment details, or cancel anytime via your customer portal 👉 <a href=\"https:\/\/secure.primepapas.com\/portal?utm_source=chatgpt.com\">secure.primepapas.com\/portal<\/a>.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}},"question_8gejxY":{"type":"question","settings":{"title":"How can I contact PrimePapas™ support?","text":"<p>Our team is here to help. Reach us by <strong>email<\/strong> at <a>support@primepapas.com<\/a> or by <strong>phone<\/strong> at <strong>+1 (806) 278-2126<\/strong>. We’ll get back to you quickly.<\/p>","highlighted_text":"none","highlighted_scribble":"circle"}}},"block_order":["question_FrCq3V","question_GgH7U8","question_T9GAiC","question_DUBY73","question_dz66B9","question_QKiVHj","question_8gejxY"],"name":"t:sections.faq.presets.name","settings":{"style":"with-border","heading":"FAQs","heading_size":"title-md","heading_alignment":"text-left md:items-end md:flex-row","heading_tag":"h2","subheading":"","description":"","button_label":"","button_link":"","button_external":false,"button_icon":true,"highlighted_text":"none","highlighted_scribble":"circle","color_text":"","color_background":"","gradient_background":"","color_highlight":"","gradient_highlight":"","color_button_text":"","color_button_background":"","color_button_gradient":"","color_overlay":"#ffffff","overlay_opacity":4,"padding_top":72,"padding_bottom":72,"divider":false,"narrow":true,"rounded":false}}},"order":["main","custom_liquid_cbyGWk","highlight_text_iE4iN9","multicolumn_RzMRUY","highlight_text_4HMV3x","contact_form_4mVLtM","faq_UgJHnx"]}